<!DOCTYPE html>
<html>
<head>
<title>Josephus Problem Solver</title>

<style>
body{
    font-family: Arial;
    text-align:center;
}

.container{
    margin:20px;
}

.circle{
    position:relative;
    width:450px;
    height:450px;
    margin:20px auto;
    border:2px solid #ccc;
    border-radius:50%;
}

.node{
    position:absolute;
    width:30px;
    height:30px;
    border-radius:50%;
    background:#4CAF50;
    color:white;
    display:flex;
    align-items:center;
    justify-content:center;
}

.survivor{
    background:red !important;
}

.checkBox{
    width:400px;
    margin:20px auto;
    padding:20px;
    border:1px solid #ddd;
    border-radius:8px;
    background:#f9f9f9;
}

button{
    padding:8px 14px;
    background:#1976d2;
    color:white;
    border:none;
    border-radius:5px;
    cursor:pointer;
}
</style>

</head>

<body>

<h1>The Josephus Problem Solver</h1>

<div class="container">
    <input id="people" type="number" value="30">
    <button onclick="createCircle()">Create Circle</button>
    <button onclick="runSimulation()">Run Step-by-Step Simulation</button>
</div>

<div id="circle" class="circle"></div>
<h2 id="answer"></h2>

<!-- Check Guess Section -->
<div class="checkBox">
    <h3>Check Your Answer</h3>
    <label>Who do you think will survive?</label>
    <select id="guess"></select>
    <button onclick="checkGuess()">Check Guess</button>
    <p id="guessResult"></p>
</div>

<script>

let nodes = [];
let alive = [];
let nGlobal = 0;

function josephus(n){
    let m = Math.floor(Math.log2(n));
    let l = n - Math.pow(2,m);
    return 2*l + 1;
}

function createCircle(){

    const n = parseInt(document.getElementById("people").value);
    nGlobal = n;

    const circle = document.getElementById("circle");
    circle.innerHTML = "";

    nodes = [];
    alive = [];

    const radius = 200;
    const center = 225;

    for(let i=1;i<=n;i++){

        const angle = (2*Math.PI*i)/n;
        const x = center + radius*Math.cos(angle) - 15;
        const y = center + radius*Math.sin(angle) - 15;

        const node = document.createElement("div");
        node.className = "node";
        node.style.left = x + "px";
        node.style.top = y + "px";
        node.innerText = i;

        circle.appendChild(node);
        nodes.push(node);
        alive.push(i);
    }

    /* Fill dropdown */
    const guessSelect = document.getElementById("guess");
    guessSelect.innerHTML="";
    for(let i=1;i<=n;i++){
        const opt=document.createElement("option");
        opt.value=i;
        opt.text=i;
        guessSelect.appendChild(opt);
    }

    document.getElementById("answer").innerText="";
    document.getElementById("guessResult").innerText="";
}

function runSimulation(){

    let i = 0;

    const interval = setInterval(() => {

        if(alive.length === 1){
            nodes[alive[0]-1].classList.add("survivor");
            document.getElementById("answer").innerText =
                "Survivor: " + alive[0];
            clearInterval(interval);
            return;
        }

        i = (i + 1) % alive.length;
        const removed = alive.splice(i,1)[0];
        nodes[removed-1].style.background = "gray";

    }, 700);
}

function checkGuess(){

    const guess = parseInt(document.getElementById("guess").value);
    const correct = josephus(nGlobal);

    if(guess === correct){
        document.getElementById("guessResult").innerText =
            "Correct! Survivor is " + correct;
    } else {
        document.getElementById("guessResult").innerText =
            "Wrong guess! Correct survivor is " + correct;
    }
}

</script>

</body>
</html>
